!function(n,t){function r(e){return e.replace(/\\(.)/gm,"$1")}n.imp_editor_storage_get_saves_list=function(o){var e={action:"image_map_pro_get_saves_list",nonce:t.querySelector("[data-nonce]").dataset.nonce};n.post(ajaxurl,e).done(function(a){var e=0;try{a=(a=r(a)).replace(/\\'/g,"'"),e=JSON.parse(a),o(e)}catch(e){a=(a=r(a)).replace(/\\'/g,"'"),console.log(e),console.log("Failed to load saves list."),console.log(a),o(!1)}})},n.imp_editor_storage_get_save=function(e,o){var a={action:"image_map_pro_get_save",saveID:e,nonce:t.querySelector("[data-nonce]").dataset.nonce};n.ajax({type:"POST",url:ajaxurl,data:a}).done(function(a){var e=0;try{e=JSON.parse(r(a));o(e)}catch(e){console.log(e),console.log("Failed to verify loaded image map."),console.log("Original JSON: "),console.log(r(a)),o(!1)}})},n.imp_editor_storage_store_save=function(e,o){var a={action:"image_map_pro_store_save",json:JSON.stringify(e),saveID:e.id,name:e.general.name,shortcode:e.general.shortcode,nonce:t.querySelector("[data-nonce]").dataset.nonce};n.ajax({type:"POST",url:ajaxurl,data:a}).done(function(a){try{JSON.parse(r(a));o(!0)}catch(e){console.log(e),console.log("Failed to verify saved image map."),console.log("Original JSON: "),console.log(r(a)),o(!1)}})},n.imp_editor_storage_delete_save=function(e,a){var o={action:"image_map_pro_delete_save",saveID:e,nonce:t.querySelector("[data-nonce]").dataset.nonce};n.post(ajaxurl,o).done(function(e){a()})},n.imp_editor_storage_get_last_save=function(a){var e={action:"image_map_pro_get_last_save",nonce:t.querySelector("[data-nonce]").dataset.nonce};n.post(ajaxurl,e).done(function(e){0<e.length?a(e):a(!1)})},n.imp_editor_storage_set_last_save=function(e,a){var o={action:"image_map_pro_set_last_save",saveID:e,nonce:t.querySelector("[data-nonce]").dataset.nonce};n.post(ajaxurl,o).done(function(){a()})}}(jQuery,(window,document));